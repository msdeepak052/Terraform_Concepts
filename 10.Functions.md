# üåü **1. What Are Functions in Terraform?**

* Functions are **built-in operations** you can use in expressions.
* They help you process **strings, numbers, collections, and more**.
* Terraform supports **over 50 built-in functions** grouped into categories.

---

# üß© **2. Categories of Terraform Functions**

1. **String Functions** ‚Äì manipulate text
2. **Numeric Functions** ‚Äì perform math
3. **Collection Functions** ‚Äì work with lists, sets, maps, tuples
4. **Date/Time Functions** ‚Äì work with timestamps
5. **Encoding/Decoding Functions** ‚Äì work with base64, JSON
6. **File Functions** ‚Äì read files or templates
7. **Other Utility Functions** ‚Äì coalesce, lookup, etc.

---

# üü¢ **3. String Functions**

| Function    | Description                     | Example                                                                     |
| ----------- | ------------------------------- | --------------------------------------------------------------------------- |
| `upper()`   | Convert string to uppercase     | `upper("dev") ‚Üí "DEV"`                                                      |
| `lower()`   | Convert string to lowercase     | `lower("PROD") ‚Üí "prod"`                                                    |
| `trim()`    | Remove spaces from start/end    | `trim("  hello  ") ‚Üí "hello"`                                               |
| `replace()` | Replace substring               | `replace("web-server", "web", "app") ‚Üí "app-server"`                        |
| `length()`  | Length of string                | `length("terraform") ‚Üí 9`                                                   |
| `format()`  | Format string with placeholders | `format("Instance %s is %s", "web", "running") ‚Üí "Instance web is running"` |

**Example Usage in Terraform:**

```hcl
variable "env" {
  default = "dev"
}

output "env_upper" {
  value = upper(var.env)
}
```

---

# üî¢ **4. Numeric Functions**

| Function  | Description             | Example               |
| --------- | ----------------------- | --------------------- |
| `min()`   | Minimum value in a list | `min(10, 20, 5) ‚Üí 5`  |
| `max()`   | Maximum value in a list | `max(10, 20, 5) ‚Üí 20` |
| `abs()`   | Absolute value          | `abs(-5) ‚Üí 5`         |
| `ceil()`  | Round up                | `ceil(3.2) ‚Üí 4`       |
| `floor()` | Round down              | `floor(3.8) ‚Üí 3`      |

**Example Usage:**

```hcl
variable "disk_sizes" {
  default = [20, 50, 10]
}

output "max_disk" {
  value = max(var.disk_sizes)
}
```

---

# üìö **5. Collection Functions (Lists, Sets, Maps)**

| Function     | Description                     | Example                                        |
| ------------ | ------------------------------- | ---------------------------------------------- |
| `length()`   | Number of elements in list/map  | `length(["a","b"]) ‚Üí 2`                        |
| `lookup()`   | Get value from map with default | `lookup({"env":"dev"}, "env", "prod") ‚Üí "dev"` |
| `keys()`     | Get all keys of a map           | `keys({"a":1,"b":2}) ‚Üí ["a","b"]`              |
| `values()`   | Get all values of a map         | `values({"a":1,"b":2}) ‚Üí [1,2]`                |
| `contains()` | Check if list contains element  | `contains(["a","b"], "a") ‚Üí true`              |
| `concat()`   | Join lists                      | `concat([1,2],[3,4]) ‚Üí [1,2,3,4]`              |
| `flatten()`  | Flatten nested lists            | `flatten([[1,2],[3,4]]) ‚Üí [1,2,3,4]`           |
| `distinct()` | Remove duplicates               | `distinct([1,2,2,3]) ‚Üí [1,2,3]`                |

**Example Usage:**

```hcl
variable "azs" {
  default = ["ap-south-1a", "ap-south-1b"]
}

output "first_az" {
  value = var.azs[0]
}

output "az_count" {
  value = length(var.azs)
}
```

---

# ‚è∞ **6. Date/Time Functions**

| Function      | Description               | Example                                                          |
| ------------- | ------------------------- | ---------------------------------------------------------------- |
| `timestamp()` | Current UTC timestamp     | `timestamp() ‚Üí "2025-10-25T12:00:00Z"`                           |
| `timeadd()`   | Add duration to timestamp | `timeadd("2025-10-25T12:00:00Z", "2h") ‚Üí "2025-10-25T14:00:00Z"` |

**Example:**

```hcl
output "now" {
  value = timestamp()
}

output "future" {
  value = timeadd(timestamp(), "24h")
}
```

---

# üóù **7. Encoding/Decoding Functions**

| Function         | Description                       | Example                                   |
| ---------------- | --------------------------------- | ----------------------------------------- |
| `jsonencode()`   | Convert object/map to JSON string | `jsonencode({a=1,b=2}) ‚Üí '{"a":1,"b":2}'` |
| `jsondecode()`   | Convert JSON string to map/object | `jsondecode('{"a":1}') ‚Üí {a=1}`           |
| `base64encode()` | Encode string in base64           | `base64encode("hello") ‚Üí "aGVsbG8="`      |
| `base64decode()` | Decode base64 string              | `base64decode("aGVsbG8=") ‚Üí "hello"`      |

**Example:**

```hcl
output "json_string" {
  value = jsonencode({env="dev", region="ap-south-1"})
}
```

---

# üìù **8. File Functions**

| Function       | Description                    | Example                   |
| -------------- | ------------------------------ | ------------------------- |
| `file()`       | Read content of a file         | `file("userdata.sh")`     |
| `filebase64()` | Read file and encode to base64 | `filebase64("script.sh")` |

**Example:**

```hcl
resource "aws_instance" "web" {
  ami           = "ami-0c55b159cbfafe1f0"
  instance_type = "t2.micro"
  user_data     = file("setup.sh")
}
```

---

# ‚ö° **9. Utility Functions**

| Function         | Description                 | Example                                        |
| ---------------- | --------------------------- | ---------------------------------------------- |
| `coalesce()`     | Return first non-null value | `coalesce(null, "dev", "prod") ‚Üí "dev"`        |
| `coalescelist()` | Return first non-empty list | `coalescelist([], [1,2]) ‚Üí [1,2]`              |
| `lookup()`       | Lookup map value            | `lookup({"env":"dev"}, "env", "prod") ‚Üí "dev"` |
| `zipmap()`       | Create map from two lists   | `zipmap(["a","b"], [1,2]) ‚Üí {a=1,b=2}`         |

**Example:**

```hcl
variable "region" {
  default = null
}

output "region_value" {
  value = coalesce(var.region, "ap-south-1")
}
```

---

# üîÅ **10. Real-Life Example Using Multiple Functions**

```hcl
variable "env" {
  default = "dev"
}

variable "azs" {
  default = ["ap-south-1a", "ap-south-1b"]
}

output "env_upper" {
  value = upper(var.env)  # String function
}

output "first_az" {
  value = var.azs[0]      # List function
}

output "instance_name" {
  value = format("%s-server-%s", var.env, var.azs[0])  # String + format
}

output "timestamp_now" {
  value = timestamp()     # Date/time function
}
```

‚úÖ This would output:

* Uppercase environment: `DEV`
* First availability zone: `ap-south-1a`
* Formatted instance name: `dev-server-ap-south-1a`
* Current UTC timestamp: `2025-10-25T12:00:00Z`

---

