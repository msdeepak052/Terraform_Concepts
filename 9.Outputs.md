# üåü **1. What is an Output Variable?**

* **Output variables** are used to **display values** from Terraform resources after `terraform apply`.
* They are useful to:

  1. **See resource attributes** like instance IDs, IPs, ARNs.
  2. **Pass values to other Terraform configurations** (when using modules).
  3. **Share information with users or scripts**.

---

# üåü **2. Syntax**

```hcl
output "<name>" {
  value       = <expression>
  description = "<optional description>"
  sensitive   = true/false  # optional
}
```

* **name** ‚Üí The identifier for the output variable.
* **value** ‚Üí What you want to display (resource attribute, variable, expression).
* **description** ‚Üí Optional; describes what the output shows.
* **sensitive** ‚Üí Optional; if true, the value is hidden in CLI output (good for passwords, secrets).

---

# üåü **3. Example ‚Äî Basic Output**

### Step 1: Create EC2 resource (`main.tf`)

```hcl
provider "aws" {
  region = "ap-south-1"
}

resource "aws_instance" "web" {
  ami           = "ami-0c55b159cbfafe1f0"
  instance_type = "t2.micro"
  tags = {
    Name = "web-server"
  }
}
```

### Step 2: Define output (`outputs.tf`)

```hcl
output "instance_id" {
  value       = aws_instance.web.id
  description = "The ID of the web EC2 instance"
}

output "public_ip" {
  value       = aws_instance.web.public_ip
  description = "The public IP of the EC2 instance"
}
```

---

# üåü **4. Run Terraform**

```bash
terraform init
terraform apply
```

After apply, Terraform shows:

```
Outputs:

instance_id = i-0abcd1234efgh5678
public_ip   = 3.110.92.8
```

‚úÖ Now you can **see resource details** without logging into AWS.

---

# üåü **5. Sensitive Output Example**

```hcl
output "db_password" {
  value     = var.db_password
  sensitive = true
}
```

Terraform will **not show this value** in CLI output ‚Äî good for secrets.

---

# üåü **6. Using Output from Modules**

If you have a module:

```hcl
module "web_server" {
  source        = "./modules/ec2"
  instance_type = "t2.micro"
}

output "web_instance_id" {
  value = module.web_server.instance_id
}
```

* You can now **access the output of a module** in your main configuration.

---

# üåü **7. Real-Life Example**

Imagine you create a **VPC and EC2 instances**, and you want to output:

* VPC ID
* Subnet IDs
* EC2 public IPs
* Security group ID

```hcl
output "vpc_id" {
  value       = aws_vpc.main.id
  description = "ID of the main VPC"
}

output "subnet_ids" {
  value       = aws_subnet.public[*].id
  description = "IDs of public subnets"
}

output "ec2_public_ips" {
  value       = aws_instance.web[*].public_ip
  description = "Public IPs of web servers"
}

output "sg_id" {
  value       = aws_security_group.web.id
}
```

‚úÖ After `terraform apply`, you instantly get all the info needed for **deployment or documentation**.

---


# **1Ô∏è‚É£ Passing values to other Terraform configurations (using modules)**

Modules are like **reusable components**. Output variables from a module can be accessed by the parent configuration.

### **Example: EC2 Module**

#### **Module folder:** `modules/ec2/main.tf`

```hcl
resource "aws_instance" "web" {
  ami           = "ami-0c55b159cbfafe1f0"
  instance_type = var.instance_type
}

variable "instance_type" {
  type = string
}

output "instance_id" {
  value = aws_instance.web.id
}

output "public_ip" {
  value = aws_instance.web.public_ip
}
```

---

#### **Root Terraform configuration:** `main.tf`

```hcl
provider "aws" {
  region = "ap-south-1"
}

module "web_server" {
  source        = "./modules/ec2"
  instance_type = "t2.micro"
}

# Access module outputs
output "web_instance_id" {
  value = module.web_server.instance_id
}

output "web_public_ip" {
  value = module.web_server.public_ip
}
```

---

#### **Explanation:**

* The module `ec2` creates an EC2 instance.
* It outputs `instance_id` and `public_ip`.
* The root module **uses those outputs** to display the info.

‚úÖ **Benefit:** You can reuse the EC2 module for multiple servers or environments and still get the instance details in the root configuration.

---

# **2Ô∏è‚É£ Sharing information with users or scripts**

Outputs can be **used by scripts, CI/CD pipelines, or users** for automation.

### Example:

#### **Terraform Output:** `outputs.tf`

```hcl
output "ec2_public_ip" {
  value = aws_instance.web.public_ip
  description = "Public IP of the EC2 instance"
}
```

---

#### **Using in a script (Bash):**

```bash
# Save the output to a variable
EC2_IP=$(terraform output -raw ec2_public_ip)

# Use the IP in a script (like SSH or Ansible)
echo "Connecting to EC2 at $EC2_IP"
ssh -i mykey.pem ec2-user@$EC2_IP
```

---

‚úÖ **Explanation:**

* `terraform output -raw <name>` returns just the value (without quotes).
* This allows scripts to **automatically consume Terraform outputs** for deployment or configuration.

---

# **Summary Table**

| Use Case        | How Output Helps                                                              |
| --------------- | ----------------------------------------------------------------------------- |
| Modules         | Pass values like IDs, IPs, ARNs from module to parent configuration           |
| Scripts / Users | Automatically get dynamic values to use in deployment, SSH, automation, CI/CD |

---

