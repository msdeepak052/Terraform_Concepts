# ðŸŒŸ **1. What is Interpolation in Terraform?**

* Interpolation in Terraform means **inserting values dynamically into strings or expressions**.
* It allows Terraform to **compute values at runtime**, instead of hardcoding them.
* Terraform expressions are evaluated inside `${...}` syntax.

---

# ðŸŒŸ **2. Syntax of Interpolation**

```hcl
"${expression}"
```

* **expression** can be:

  * A variable (`var.name`)
  * A resource attribute (`aws_instance.web.id`)
  * A function (`upper(var.env)`)
  * A combination of variables, functions, and operators

> **Note:** Starting Terraform 0.12+, you **can often omit `${}`** and just use `var.name` or `resource.attribute` directly.

---

# ðŸŒŸ **3. Interpolation Using Variables**

```hcl
variable "env" {
  default = "dev"
}

output "env_message" {
  value = "Current environment is ${var.env}"
}
```

**Output:**

```
Current environment is dev
```

âœ… Here, `${var.env}` dynamically inserts the variable value into the string.

---

# ðŸŒŸ **4. Interpolation Using Resource Attributes**

```hcl
resource "aws_instance" "web" {
  ami           = "ami-0c55b159cbfafe1f0"
  instance_type = "t2.micro"
  tags = {
    Name = "web-server-${var.env}"
  }
}

output "instance_id" {
  value = "${aws_instance.web.id}"
}
```

**Explanation:**

* `${aws_instance.web.id}` gets the **EC2 instance ID dynamically** after apply.
* `${var.env}` is also used inside the tag to create **dynamic names**.

---

# ðŸŒŸ **5. Interpolation With Functions**

You can combine interpolation with functions for **dynamic formatting**.

```hcl
output "upper_env" {
  value = "Environment in uppercase: ${upper(var.env)}"
}
```

**Output:**

```
Environment in uppercase: DEV
```

---

# ðŸŒŸ **6. Interpolation with Maps and Lists**

### Example with Map:

```hcl
variable "region_amis" {
  default = {
    "ap-south-1" = "ami-12345"
    "us-east-1"  = "ami-67890"
  }
}

output "selected_ami" {
  value = "AMI for region is ${var.region_amis["ap-south-1"]}"
}
```

### Example with List:

```hcl
variable "azs" {
  default = ["ap-south-1a", "ap-south-1b"]
}

output "first_az" {
  value = "First availability zone is ${var.azs[0]}"
}
```

---

# ðŸŒŸ **7. Conditional Interpolation**

You can use **ternary expressions**:

```hcl
variable "env" {
  default = "prod"
}

output "instance_type" {
  value = "${var.env == "prod" ? "t3.large" : "t2.micro"}"
}
```

* If `env = prod` â†’ output is `t3.large`
* Else â†’ `t2.micro`

---

# ðŸŒŸ **8. Multiple Interpolations in One String**

```hcl
output "instance_info" {
  value = "Instance ${aws_instance.web.id} is in ${var.env} environment on ${var.azs[0]}"
}
```

**Output Example:**

```
Instance i-0abcd1234efgh5678 is in dev environment on ap-south-1a
```

---

# ðŸŒŸ **9. Notes on Terraform 0.12+**

* You **donâ€™t always need `${}` anymore**. You can write directly:

```hcl
output "instance_id" {
  value = aws_instance.web.id
}
```

* But using `${}` is still valid and often used for **string concatenation**.

---

# ðŸŒŸ **10. Real-Life Example Using Interpolation**

```hcl
variable "env" {
  default = "dev"
}

variable "azs" {
  default = ["ap-south-1a", "ap-south-1b"]
}

resource "aws_instance" "web" {
  ami           = "ami-0c55b159cbfafe1f0"
  instance_type = "t2.micro"
  tags = {
    Name        = "web-${var.env}-${var.azs[0]}"
    Environment = "${var.env}"
  }
}

output "instance_info" {
  value = "Instance ${aws_instance.web.id} with public IP ${aws_instance.web.public_ip} is running in ${var.env} on AZ ${var.azs[0]}"
}
```

âœ… **Result:**

* EC2 tags dynamically include environment and AZ.
* Output shows instance ID, IP, environment, and AZ in **one dynamic string**.

---

Interpolation is basically **the glue that connects variables, resources, and functions** in Terraform â€” making your infrastructure dynamic, readable, and reusable.

---
